<GlobalControl ID="SC_Edit_Special_JPegPhoto" Comment="" MigrationNotes="DMLREPLACE;DIALOGCONFIGPARM;" MetamodelVersion="2011-02-25"><ContextConfiguration><ContextParameters /><ConfigSection Name="sc.PictureEdit" Description=""><ConfigParams><ConfigParam Key="MaxWidth" Description="'MaxWidth'" LongDescription="&quot;Specifies the maximum width of the image in pixels.&#xA;The uploaded image is scaled down to maximum width and height (retreived from MaxWidth and AspectRatio) prior to allow further customization. The default is 800.&quot;" Type="Expression" /><ConfigParam Key="AspectRatio" Description="'AspectRatio'" LongDescription="&quot;Defines the fixed aspect ratio of the image.&#xA;Specified as decimal number like 3/4 = 0.75 or 16/9=1.777 for example.&#xA;The Default is 0.75.&quot;" Type="Expression" /><ConfigParam Key="StoreWidth" Description="'StoreWidth'" LongDescription="&quot;Specifies the fixed width of the target image (selected area will be scaled to that value). Default is 200&quot;" Type="Expression" /><ConfigParam Key="DisplayWidth" Description="'DisplayWidth'" LongDescription="&quot;Specifies the width of the preview image. Default is 200&quot;" Type="Expression" /></ConfigParams></ConfigSection></ContextConfiguration><Context ContainerType="Container" ActionOnCreateWithRowState="false"><Container EnableEvents="false" IsAutoFocusOnRender="false"><ContainerTemplate DataTable="Vars"><Container EnableEvents="false" IsAutoFocusOnRender="false"><Container EnableEvents="false" IsAutoFocusOnRender="false" Condition="(select current isnull(editcolumn) from edittable)"><ControlReferenceContainer ID="SC_Div_Wrapper" ScriptItemUID="59ab203b-e31a-47a2-97f3-b69dd0715396"><VirtualControlMapping VirtualControl="DivContent" ContainerType="Container"><Container EnableEvents="false" IsAutoFocusOnRender="false"><Image Source="ProjectResource" Action="Display" ScriptItemUID="cd4750c7-671e-4970-9291-be2552195695" ImageReference="person.gif" /></Container></VirtualControlMapping><VirtualFunctionMapping ID="SetID()" Value="&quot;dummyPersonImage&quot;" /><VirtualFunctionMapping ID="SetStyle()" Value="if select current isEditing from Vars then&#xA;&quot;display:none;&quot;&#xA;else&#xA;&quot;display:block;&quot;" /></ControlReferenceContainer></Container><Container EnableEvents="false" IsAutoFocusOnRender="false" Condition="(select current not(isnull(editcolumn)) from edittable)"><ControlReferenceContainer ID="SC_Div_Wrapper" ScriptItemUID="8dcbe812-92dd-41d9-b1e0-3ad1da732328"><VirtualControlMapping VirtualControl="DivContent" ContainerType="Container"><Container EnableEvents="false" IsAutoFocusOnRender="false" CustomStyle="&quot;position: relative;&quot;"><Image Source="DataSet" Action="Display" ScriptItemUID="87b65ce4-d6ba-4e1a-b4e2-62f2bac7d6af" DataTable="EditTable" DataColumn="EditColumn" AlternateText="datacaption(edittable, editcolumn)" ItemUID="currentPersonImage" CustomStyle="Concat((&quot;width: &quot;, isnull(Convert(getconfig(&quot;DisplayWidth&quot;), &quot;Int32&quot;),200), &quot;px; height:&quot;, isnull(Convert(getconfig(&quot;DisplayWidth&quot;), &quot;Int32&quot;),200) /  isnull(Convert(getconfig(&quot;AspectRatio&quot;), &quot;Decimal&quot;),0.75), &quot;px&quot;), &quot;&quot;)" /></Container></VirtualControlMapping><VirtualFunctionMapping ID="SetID()" Value="&quot;currentPersonImage&quot;" /><VirtualFunctionMapping ID="SetStyle()" Value="if select current isEditing from Vars then&#xA;&quot;display:none;&quot;&#xA;else&#xA;&quot;display:block;&quot;" /></ControlReferenceContainer></Container><ControlReferenceContainer ID="SC_Div_Wrapper" ScriptItemUID="9a1d61ae-42c0-472b-b784-98f2d74f09cd"><VirtualControlMapping VirtualControl="DivContent" ContainerType="Container"><Container EnableEvents="false" IsAutoFocusOnRender="false" Condition="select current canedit(editcolumn) from edittable" ItemUID="editContainer"><Literal Type="HTML" Expression="&quot;&lt;script type=&quot;&quot;text/javascript&quot;&quot;&gt;&#xA;&#xA;var displayEditImageFunc;&#xA;var endEditImageFunc;&#xA;&#xA;$(document).ready(function () {&#xA;    var onclickString = $('#imageEditButton a:first').attr('onclick');&#xA;    $('#imageEditButton a:first').attr('onclick',  'displayEditImageFunc();' + onclickString);&#xA;	&#xA;	var acceptImageButton = $('#acceptDeleteButtons button:first');&#xA;    acceptImageButton.attr('onclick', 'endEditImageFunc();' + acceptImageButton.attr('onclick'));&#xA;   &#xA;    var deleteImageButton = $('#acceptDeleteButtons button:last');&#xA;    deleteImageButton.attr('onclick', 'endEditImageFunc();' + deleteImageButton.attr('onclick'));&#xA;	&#xA;	var aspectRatio = &quot; + replace(isnull(Convert(getconfig(&quot;AspectRatio&quot;), &quot;Decimal&quot;),0.75), &quot;,&quot;, &quot;.&quot;)  + &quot;;&#xA;	var shadowTop = $('#shadowTop');&#xA;	var shadowLeft = $('#shadowLeft');&#xA;	var shadowRight = $('#shadowRight');&#xA;	var shadowBottom = $('#shadowBottom');&#xA;	var realWidth&#xA;	var realHeight;&#xA;	var refreshImageTimer;&#xA;	var counter = $('#changeCountTextbox input:first').val();&#xA;	&#xA;	$('#croppingFrame').resizable({ &#xA;        handles: 'sw, se, ne, nw',&#xA;        containment: 'parent',&#xA;        resize: function (event, ui) {&#xA;        	resizeShadow(event, ui);&#xA;        },&#xA;        aspectRatio: aspectRatio,&#xA;         stop: function (event, ui) {&#xA;       		finishedCropping(event, ui);&#xA;       	},&#xA;       	minHeight: 32,&#xA;       	minWidth: 24&#xA;    });&#xA;        &#xA;    $('#croppingFrame').draggable({&#xA;       	containment: 'parent',&#xA;       	drag: function (event, ui) {&#xA;       		resizeShadow(event, ui);&#xA;       	},&#xA;       	stop: function (event, ui) {&#xA;       		finishedCropping(event, ui);&#xA;       	}&#xA;    });&#xA;	&#xA;	$('#contrastSlider').slider({&#xA;		min: 0,&#xA;		max: 200,&#xA;		value: 100,&#xA;		stop: function (event, ui) {&#xA;			setContrast(event, ui);&#xA;		}&#xA;	});&#xA;	&#xA;	$('#brightnessSlider').slider({&#xA;		min: -100,&#xA;		max: 100,&#xA;		value: 0,&#xA;		stop: function (event, ui) {&#xA;			setBrightness(event, ui);&#xA;		}&#xA;	});&#xA;	&#xA;	$('#saturationSlider').slider({&#xA;		min: 0,&#xA;		max: 200,&#xA;		value: 100,&#xA;		stop: function (event, ui) {&#xA;			setSaturation(event, ui);&#xA;		}&#xA;	});&#xA;	&#xA;	displayEditImageFunc = function displayEditImage() {&#xA;    	initEditPicture();&#xA;		$('#imageEditButton').css('display', 'none');&#xA;		$('#currentPersonImage').css('display', 'none');&#xA;		$('#dummyPersonImage').css('display', 'none');&#xA;    	$('#imageEditContainer').fadeIn('slow');&#xA;	}&#xA;&#xA;	endEditImageFunc = function endEditImage() {&#xA;   		$('#imageEditContainer').css('display', 'none');&#xA;		$('#imageEditButton').css('display', 'block');&#xA;		$('#dummyPersonImage').fadeIn('slow');&#xA;		&#xA;		if (refreshImageTimer !== 'undefined') {&#xA;		    window.clearInterval(refreshImageTimer);&#xA;		}&#xA;		&#xA;		window.setTimeout(function () {&#xA;			var img = $('#currentPersonImage img:first');&#xA;			$(img[0]).attr('src', $(img[0]).attr('src') + '&amp;r=' + Math.random()).load(function () {&#xA;				$('#currentPersonImage').fadeIn('slow');&#xA;			});&#xA;		}, 300);&#xA;	}&#xA;&#xA;	function setContrast (event, ui) {&#xA;		$('#contrastTextbox input:first').val(ui.value).blur();&#xA;	}&#xA;	&#xA;	function setBrightness (event, ui) {&#xA;		$('#brightnessTextbox input:first').val(ui.value).blur();&#xA;	}&#xA;	&#xA;	function setSaturation (event, ui) {&#xA;		$('#saturationTextbox input:first').val(ui.value).blur();&#xA;	}&#xA;	&#xA;	function initEditPicture() {&#xA;	&#xA;		var img = $('#imageWrapper img:first');&#xA;		&#xA;		$('&lt;img/&gt;').attr('src', $(img[0]).attr('src') + '&amp;r=' + Math.random()).load(function() {&#xA;    &#xA;        	realWidth = this.width;   /* Note: $(this).width() will not */&#xA;        	realHeight = this.height; /* work for in memory images. */&#xA;			&#xA;			if (realWidth &lt; 10 || realHeight &lt; 10) {&#xA;		    	$('#imageWrapper').css('display', 'none');&#xA;		    	return;&#xA;			}&#xA;        &#xA;        	$(img[0]).parent('div').css({width: realWidth + 'px', height: realHeight + 'px'});&#xA;		&#xA;			var imageRatio = realWidth / realHeight;&#xA;			var x,y=0;&#xA;			var w = realWidth;&#xA;			var h = realHeight;&#xA;		&#xA;			if (!(imageRatio &lt; aspectRatio)) &#xA;			{&#xA;		    	w = realHeight * aspectRatio;&#xA;            	x = (realWidth - w) / 2;&#xA;        	}&#xA;        	else&#xA;        	{&#xA;        	    h = w / imageRatio;&#xA;       		    y = (realHeight - h) / 2;&#xA;	   	 	}&#xA;		&#xA;			$('#croppingFrame').css({&#xA;			    top: y + 'px',&#xA;			    left: x + 'px',&#xA;				width: ((h - 4) * aspectRatio) + 'px',&#xA;			    height: (h - 4) + 'px'&#xA;			});&#xA;		&#xA;			var ui = { &#xA;	        	helper: $('#croppingFrame'),&#xA;	        	position: $('#croppingFrame').position()&#xA;    	    };&#xA;		&#xA;			resizeShadow(null, ui);&#xA;			&#xA;			refreshImageTimer = window.setInterval(function() {&#xA;	        	var newCounter = $('#changeCountTextbox input:first').val();&#xA;	        	if (counter != newCounter) {&#xA;		        	$(img[0]).attr('src', $(img[0]).attr('src') + '&amp;r=' + Math.random());&#xA;			    	counter = newCounter;&#xA;		    	}&#xA;        	}, 300);&#xA;        });&#xA;	}&#xA;	&#xA;	function resizeShadow (event, ui) {&#xA;   		var size = {&#xA;   			width: ui.helper.width(),&#xA;   			height: ui.helper.height()&#xA;   		};&#xA;   		&#xA;   		shadowTop.css({&#xA;   			height:  ui.position.top&#xA;   		});&#xA;   		&#xA;   		shadowLeft.css({&#xA;   			width: ui.position.left,&#xA;   			height: size.height + 4,&#xA;			top: ui.position.top&#xA;   		});&#xA;   		&#xA;		var newWidth = realWidth - ui.position.left - size.width - 4;&#xA;		&#xA;   		shadowRight.css({&#xA;   			width: newWidth &lt; 0 ? 0 : newWidth,&#xA;   			height: size.height + 4,&#xA;			top: ui.position.top&#xA;   		});&#xA;   		&#xA;   		shadowBottom.css({&#xA;   			height: realHeight - ui.position.top - size.height - 4&#xA;   		});	&#xA;   }&#xA;   &#xA;   function finishedCropping (event, ui) {&#xA;   		var ui = { &#xA;        	helper: $('#croppingFrame'),&#xA;        	position: $('#croppingFrame').position()&#xA;        };&#xA;		&#xA;        resizeShadow(null, ui);&#xA;		&#xA;		$('#xPosition input:first').val(Math.round(ui.position.left)).blur();&#xA;		$('#yPosition input:first').val(Math.round(ui.position.top)).blur();&#xA;		$('#width input:first').val(Math.round(ui.helper.width() + 4)).blur();&#xA;		$('#height input:first').val(Math.round(ui.helper.height() + 4)).blur();&#xA;   }&#xA;   &#xA;   initEditPicture();&#xA;});&#xA;&lt;/script&gt;&quot;&#xA;" /><ControlReferenceContainer ID="SC_Div_Wrapper" ScriptItemUID="4af81f6f-cc5b-4ada-a548-dc20c68ce463" ItemUID="image edit"><VirtualControlMapping VirtualControl="DivContent" ContainerType="Container"><Container EnableEvents="false" IsAutoFocusOnRender="false"><Image Source="StockImage" StockImage="Edit" StockImageSize="Small" Action="Redirect" ScriptItemUID="a3684a15-4644-46ef-a722-0d62f2b6ed09" AlternateText="translate(&quot;#LDS#Change&quot;)" ItemUID="imageEditButton"><ServerActionCall ExecuteAsync="false" ScriptItemUID="ea218004-e002-42cb-b7db-96f3bed03b95"><ActionSequence><CallAction ActionID="InitializeImage" ScriptItemUID="3b92d8c7-0308-41bc-be57-46ec62a03d49" /><Update DataTable="Vars" DataColumn="isEditing" Value="true" /></ActionSequence></ServerActionCall></Image><Label Text="'Bild ändern'" Action="Display" EnableSubControls="false" ScriptItemUID="7b281ced-e47d-4ed6-be4f-5b5d9114e437" Layout="'VI_Styles_Label_SmallButton'" /></Container></VirtualControlMapping><VirtualFunctionMapping ID="SetID()" Value="&quot;imageEditButton&quot;" /></ControlReferenceContainer><Container EnableEvents="false" IsAutoFocusOnRender="false"><ControlReferenceContainer ID="SC_Div_Wrapper" ScriptItemUID="65378241-4775-4da1-944f-8626b514d56a"><VirtualControlMapping VirtualControl="DivContent" ContainerType="Container"><Container EnableEvents="false" IsAutoFocusOnRender="false"><Container EnableEvents="false" IsAutoFocusOnRender="false" Layout="'VI_Styles_Container_Paragraph'"><FileUpload Destination="Table" DataTable="Vars" DataColumn="rawImage" TextBoxText="translate(&quot;#LDS#Upload&quot;)"><ServerActionCall ExecuteAsync="false" ScriptItemUID="21484a5c-a0b4-44d5-b27d-41b9dc0021ad"><ActionSequence><CallAction ActionID="InitializeImage" ScriptItemUID="8ca547c5-9c94-4780-9aa2-9b3ebd5838c0" /><Update DataTable="Vars" DataColumn="resultImage" Value="select rawImage from Vars" /></ActionSequence></ServerActionCall></FileUpload></Container><Container EnableEvents="false" IsAutoFocusOnRender="false" Layout="'SC_Styles_Container_Paragraph'" ItemUID="imagewrapper"><ControlReferenceContainer ID="SC_Div_Wrapper" ScriptItemUID="390129a4-48c1-421b-b23e-5a42c3a71ee9"><VirtualControlMapping VirtualControl="DivContent" ContainerType="Container"><Container EnableEvents="false" IsAutoFocusOnRender="false" CustomStyle="&quot;position:relative;margin-top:10px;&quot;"><Image Source="DataSet" Action="Display" ScriptItemUID="c4cd1288-517c-4d08-b70b-231452c76d39" DataTable="Vars" DataColumn="resultImage" ItemUID="personelPicture" CustomStyle="&quot;position: absolute;&quot;" /><Literal Type="HTML" Expression="&quot;&lt;div id=&quot;&quot;croppingFrame&quot;&quot; style=&quot;&quot;border: 2px dotted #000000; width: 240px; height: 320px;background: url('&quot; + variable(&quot;%link%tpl=blank.gif&quot;) +&quot;');&quot;&quot;&gt;&lt;/div&gt;&#xA;&lt;div id=&quot;&quot;shadowTop&quot;&quot; style=&quot;&quot;width:100%;height:0;top:0;left:0;background:#000000;filter:alpha(opacity=70);opacity:.7;position:absolute;&quot;&quot;&gt;&lt;/div&gt;&#xA;&lt;div id=&quot;&quot;shadowLeft&quot;&quot; style=&quot;&quot;width:0;height:100%;float:left;top:20px;left:0;background:#000000;filter:alpha(opacity=70);opacity:.7;position:absolute;&quot;&quot;&gt;&lt;/div&gt;&#xA;&lt;div id=&quot;&quot;shadowRight&quot;&quot; style=&quot;&quot;width:0;height:100%;float:right;right:0;top:20px;background: #000000;filter:alpha(opacity=70);opacity:.7;position:absolute;&quot;&quot;&gt;&lt;/div&gt;&#xA;&lt;div id=&quot;&quot;shadowBottom&quot;&quot; style=&quot;&quot;width:100%;height:0;clear:both;bottom:0;left:0;background:#000000;filter:alpha(opacity=70);opacity:.7;position:absolute;&quot;&quot;&gt;&lt;/div&gt;&quot;" /></Container></VirtualControlMapping><VirtualFunctionMapping ID="SetID()" Value="&quot;imageWrapper&quot;" /></ControlReferenceContainer><Container EnableEvents="false" IsAutoFocusOnRender="false" ItemUID="sliders"><Container EnableEvents="false" IsAutoFocusOnRender="false" ItemUID="wrapperContrast" CustomStyle="&quot;width: 200px;margin-top: 10px;&quot;" Layout="'SC_Blank_Container'"><Literal Type="HTML" Expression="&quot;&lt;div id=&quot;&quot;contrastSlider&quot;&quot;&gt;&lt;div style=&quot;&quot;width: 2px; height: 10px; margin: 0 auto 0 auto; background: #b9b9b9;&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&quot;" /></Container><Container EnableEvents="false" IsAutoFocusOnRender="false" ItemUID="labelContrast"><Label Text="translate('#LDS#Kontrast')" Action="Display" EnableSubControls="false" ScriptItemUID="5f356627-b44c-4818-84d1-9f8892f652be" /></Container><Container EnableEvents="false" IsAutoFocusOnRender="false" ItemUID="wrapperBrightness" CustomStyle="&quot;width: 200px;margin-top: 10px;&quot;"><Literal Type="HTML" Expression="&quot;&lt;div id=&quot;&quot;brightnessSlider&quot;&quot;&gt;&lt;div style=&quot;&quot;width: 2px; height: 10px; margin: 0 auto 0 auto; background: #b9b9b9;&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&quot;" /></Container><Container EnableEvents="false" IsAutoFocusOnRender="false" ItemUID="labelBrightness"><Label Text="translate('#LDS#Helligkeit') " Action="Display" EnableSubControls="false" ScriptItemUID="d785323e-a182-4c3c-961d-83db8a5f65e6" /></Container><Container EnableEvents="false" IsAutoFocusOnRender="false" ItemUID="wrapperSaturation" Layout="'SC_Blank_Container'" CustomStyle="&quot;width: 200px;margin-top: 10px;&quot;"><Literal Type="HTML" Expression="&quot;&lt;div id=&quot;&quot;saturationSlider&quot;&quot;&gt;&lt;div style=&quot;&quot;width: 2px; height: 10px; margin: 0 auto 0 auto; background: #b9b9b9;&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&quot;" /></Container><Container EnableEvents="false" IsAutoFocusOnRender="false" ItemUID="labelSaturation"><Label Text="translate('#LDS#Sättigung')" Action="Display" EnableSubControls="false" ScriptItemUID="9e30d903-022f-439f-bfb4-50161710191c" /></Container></Container><Container EnableEvents="false" IsAutoFocusOnRender="false" ItemUID="hidden textboxes"><ControlReferenceContainer ID="SC_Hidden_TextBox" ScriptItemUID="e9a6048f-4c0c-42d1-9719-e3dc58875372" ItemUID="xPosition"><VirtualFunctionMapping ID="SetID()" Value="&quot;xPosition&quot;" /><VirtualTableMapping VirtualTable="EditTable" DataTable="Vars"><VirtualColumnMapping VirtualColumn="EditColumn" DataColumn="x" /></VirtualTableMapping></ControlReferenceContainer><ControlReferenceContainer ID="SC_Hidden_TextBox" ScriptItemUID="ee752af4-36e1-48b4-88c2-e067d456d15e" ItemUID="yPosition"><VirtualFunctionMapping ID="SetID()" Value="&quot;yPosition&quot;" /><VirtualTableMapping VirtualTable="EditTable" DataTable="Vars"><VirtualColumnMapping VirtualColumn="EditColumn" DataColumn="y" /></VirtualTableMapping></ControlReferenceContainer><ControlReferenceContainer ID="SC_Hidden_TextBox" ScriptItemUID="a30e3d8d-5972-4a36-b301-bdf916bc123d" ItemUID="width"><VirtualFunctionMapping ID="SetID()" Value="&quot;width&quot;" /><VirtualTableMapping VirtualTable="EditTable" DataTable="Vars"><VirtualColumnMapping VirtualColumn="EditColumn" DataColumn="width" /></VirtualTableMapping></ControlReferenceContainer><ControlReferenceContainer ID="SC_Hidden_TextBox" ScriptItemUID="b973861c-a3ec-469f-910a-487e33719928" ItemUID="height"><VirtualFunctionMapping ID="SetID()" Value="&quot;height&quot;" /><VirtualTableMapping VirtualTable="EditTable" DataTable="Vars"><VirtualColumnMapping VirtualColumn="EditColumn" DataColumn="height" /></VirtualTableMapping></ControlReferenceContainer><ControlReferenceContainer ID="SC_Hidden_TextBox" ScriptItemUID="3b6e9e78-ac0a-4aed-869e-8eb0fa8b1f4c" ItemUID="brightnessTextbox"><VirtualFunctionMapping ID="SetID()" Value="&quot;brightnessTextbox&quot;" /><VirtualTableMapping VirtualTable="EditTable" DataTable="Vars"><VirtualColumnMapping VirtualColumn="EditColumn" DataColumn="brightness" /></VirtualTableMapping></ControlReferenceContainer><ControlReferenceContainer ID="SC_Hidden_TextBox" ScriptItemUID="5ebe2532-e74f-4428-a9f9-7ae481760edb" ItemUID="contrastTextbox"><VirtualFunctionMapping ID="SetID()" Value="&quot;contrastTextbox&quot;" /><VirtualTableMapping VirtualTable="EditTable" DataTable="Vars"><VirtualColumnMapping VirtualColumn="EditColumn" DataColumn="contrast" /></VirtualTableMapping></ControlReferenceContainer><ControlReferenceContainer ID="SC_Hidden_TextBox" ScriptItemUID="58d052ca-7c80-4a45-877a-f96b9b72eea6" ItemUID="saturationTextbox"><VirtualFunctionMapping ID="SetID()" Value="&quot;saturationTextbox&quot;" /><VirtualTableMapping VirtualTable="EditTable" DataTable="Vars"><VirtualColumnMapping VirtualColumn="EditColumn" DataColumn="saturation" /></VirtualTableMapping></ControlReferenceContainer><ControlReferenceContainer ID="SC_Hidden_TextBox" ScriptItemUID="6c894ca4-d04b-4ec4-b1da-edf6ebf8d972" ItemUID="changeCountTextbox"><VirtualFunctionMapping ID="SetID()" Value="&quot;changeCountTextbox&quot;" /><VirtualTableMapping VirtualTable="EditTable" DataTable="Vars"><VirtualColumnMapping VirtualColumn="EditColumn" DataColumn="changeCount" /></VirtualTableMapping></ControlReferenceContainer></Container><Container EnableEvents="false" IsAutoFocusOnRender="false" Layout="'VI_Styles_Container_ButtonPanel'" ItemUID="accept and delete buttons"><ControlReferenceContainer ID="SC_Div_Wrapper" ScriptItemUID="3c7c9c46-6c49-4f11-af66-7e5cabcbad2f"><VirtualControlMapping VirtualControl="DivContent" ContainerType="Container"><Container EnableEvents="false" IsAutoFocusOnRender="false"><Button DisplayType="Text" Text="translate('#LDS#Übernehmen')" Action="Redirect" ScriptItemUID="86f8db63-9c1a-4a34-8bed-ff52dc10867a" ItemUID="acceptImageButton"><ServerActionCall ExecuteAsync="false" ScriptItemUID="1c164e0a-87f4-47a5-9eb5-83c6bdaf13bd"><ActionSequence><CallAction ActionID="ScaleTransformImage" ScriptItemUID="f947b28a-76b2-44c6-897e-79a210af3422" /><Update DataTable="EditTable" DataColumn="EditColumn" Value="select current resultImage from vars" /><Update DataTable="Vars" DataColumn="rawImage" Value="select resultImage from vars" /><Update DataTable="Vars" DataColumn="changeCount" Value="select changeCount+1 from vars" /><Update DataTable="Vars" DataColumn="isEditing" Value="false" /><CallAction ActionID="InitTransformation" ScriptItemUID="540b7439-2e22-42f3-831f-66c6d21eb341" /></ActionSequence></ServerActionCall></Button><Button DisplayType="Text" Text="translate('#LDS#Bild löschen')" Action="Redirect" ScriptItemUID="74dc4d5e-52f7-4146-855d-baa841675b53" ItemUID="deleteImageButton"><ServerActionCall ExecuteAsync="false" ScriptItemUID="24680867-0538-45cf-9af0-373209f7a8ee"><ActionSequence><Update DataTable="Vars" DataColumn="resultImage" /><Update DataTable="Vars" DataColumn="rawImage" Value="select resultImage from vars" /><Update DataTable="EditTable" DataColumn="EditColumn" Value="select current resultImage from vars" /><Update DataTable="Vars" DataColumn="isEditing" Value="false" /><CallAction ActionID="InitTransformation" ScriptItemUID="fcff08e7-6634-4302-b383-d8cd725648dd" /></ActionSequence></ServerActionCall></Button></Container></VirtualControlMapping><VirtualFunctionMapping ID="SetID()" Value="&quot;acceptDeleteButtons&quot;" /></ControlReferenceContainer></Container></Container></Container></VirtualControlMapping><VirtualFunctionMapping ID="SetID()" Value="&quot;imageEditContainer&quot;" /><VirtualFunctionMapping ID="SetStyle()" Value="if select current isEditing from Vars then&#xA;&quot;display:block;&quot;&#xA;else&#xA;&quot;display:none;&quot;" /></ControlReferenceContainer></Container></Container></VirtualControlMapping><VirtualFunctionMapping ID="SetID()" Value="&quot;editContainer&quot;" /></ControlReferenceContainer></Container></ContainerTemplate></Container><ActionSequence><ActionSequence><CallAction ActionID="InitTransformation" ScriptItemUID="39c7b519-ba3b-4742-b510-f7ff27eccf26" /><Update DataTable="Vars" DataColumn="height" Value="0" /><Update DataTable="Vars" DataColumn="width" Value="0" /><Update DataTable="Vars" DataColumn="x" Value="0" /><Update DataTable="Vars" DataColumn="y" Value="0" /><Update DataTable="Vars" DataColumn="rawImage" Value="select editcolumn from edittable" /><Update DataTable="Vars" DataColumn="resultImage" Value="select editcolumn from edittable" /></ActionSequence></ActionSequence><Tables><DataTable Type="Variable" Table="Vars" Comment=""><Column Name="x" DataType="System.Int32" Comment="" /><Column Name="y" DataType="System.Int32" Comment="" /><Column Name="width" DataType="System.Int32" Comment="" /><Column Name="height" DataType="System.Int32" Comment="" /><Column Name="rawImage" DataType="System.Byte[]" Comment="stores the uploaded unchanged image" /><Column Name="saturation" DataType="System.Int32" Comment="" /><Column Name="brightness" DataType="System.Int32" Comment="" /><Column Name="contrast" DataType="System.Int32" Comment="" /><Column Name="resultImage" DataType="System.Byte[]" Comment="holds the image returned from server action" /><Column Name="changeCount" DataType="System.Int32" Comment="" /><Column Name="isEditing" DataType="System.Boolean" Comment="" /></DataTable></Tables><Controls><Control ID="TransformImage" ContainerType="ActionComponent" Comment=""><ActionComponent><Code ClassName="sc.QOIM.WebDesigner.PictureEditor.TransformAction,sc.QOIM.WebDesigner.PictureEditor"><ParameterFree Name="'InImage'" Value="select rawImage from Vars" /><ParameterFree Name="'Brightness'" Value="select brightness from vars" /><ParameterFree Name="'Saturation'" Value="select Saturation from vars" /><ParameterFree Name="'Contrast'" Value="select contrast from vars" /><ParameterFree Name="'OutImage'" Value="&quot;resultImage&quot;" /><ParameterFree Name="'TargetCollection'" Value="Vars" /></Code></ActionComponent></Control><Control ID="InitializeImage" ContainerType="ActionComponent" Comment=""><ActionComponent><CallAction ActionID="InitTransformation" ScriptItemUID="5cfecbab-9165-4d72-8ccb-82a14b5a4f8f" /><Code ClassName="sc.QOIM.WebDesigner.PictureEditor.InitPictureAction,sc.QOIM.WebDesigner.PictureEditor"><ParameterFree Name="'ImageColumn'" Value="&quot;rawImage&quot;" /><ParameterFree Name="'XColumn'" Value="&quot;X&quot;" /><ParameterFree Name="'YColumn'" Value="&quot;y&quot;&#xA;" /><ParameterFree Name="'WidthColumn'" Value="&quot;width&quot;" /><ParameterFree Name="'HeightColumn'" Value="&quot;height&quot;" /><ParameterFree Name="'AspectRatio'" Value="isnull(Convert(getconfig(&quot;AspectRatio&quot;), &quot;Decimal&quot;),0.75)" /><ParameterFree Name="'MaxWidth'" Value="isnull(Convert(getconfig(&quot;MaxWidth&quot;), &quot;Int32&quot;),800)" /><ParameterFree Name="'Collection'" Value="Vars" /></Code></ActionComponent></Control><Control ID="InitTransformation" ContainerType="ActionComponent" Comment=""><ActionComponent><Update DataTable="Vars" DataColumn="brightness" Value="0" /><Update DataTable="Vars" DataColumn="contrast" Value="100" /><Update DataTable="Vars" DataColumn="saturation" Value="100" /></ActionComponent></Control><Control ID="ScaleTransformImage" ContainerType="ActionComponent" Comment=""><ActionComponent><Code ClassName="sc.QOIM.WebDesigner.PictureEditor.ScaleTransformAction,sc.QOIM.WebDesigner.PictureEditor"><ParameterFree Name="'InImage'" Value="select rawImage from Vars" /><ParameterFree Name="'XPos'" Value="select x from vars" /><ParameterFree Name="'YPos'" Value="select y from vars" /><ParameterFree Name="'Width'" Value="select width from vars" /><ParameterFree Name="'Height'" Value="select height from vars" /><ParameterFree Name="'Brightness'" Value="select brightness from vars" /><ParameterFree Name="'Saturation'" Value="select Saturation from vars" /><ParameterFree Name="'Contrast'" Value="select contrast from vars" /><ParameterFree Name="'OutImage'" Value="&quot;resultImage&quot;" /><ParameterFree Name="'TargetCollection'" Value="Vars" /><ParameterFree Name="'AspectRatio'" Value="isnull(Convert(getconfig(&quot;AspectRatio&quot;), &quot;Decimal&quot;),0.75)" /><ParameterFree Name="'StoreWidth'" Value="isnull(Convert(getconfig(&quot;StoreWidth&quot;), &quot;Int32&quot;),200)" /></Code></ActionComponent></Control><Control ID="" ContainerType="Container" Comment=""><Container EnableEvents="false" IsAutoFocusOnRender="false" /></Control></Controls><Functions /><DataEventHandlers><DataEventHandler Operation="Update" DataTable="Vars"><ActionSequence><CallAction ActionID="TransformImage" ScriptItemUID="648e0b35-9ad3-45ef-b073-70ac8708d3e7" /></ActionSequence><DataEventHandlerColumn DataColumn="saturation" /><DataEventHandlerColumn DataColumn="brightness" /><DataEventHandlerColumn DataColumn="contrast" /></DataEventHandler><DataEventHandler Operation="Update" DataTable="Vars"><ActionSequence><Update DataTable="Vars" DataColumn="changeCount" Value="select changeCount+1 from vars" /></ActionSequence><DataEventHandlerColumn DataColumn="resultImage" /></DataEventHandler></DataEventHandlers></Context><VirtualTable Name="EditTable" Comment="" RequiredCursorCount="1"><VirtualColumn Name="EditColumn" DataType="System.Object" Comment="" /></VirtualTable></GlobalControl>